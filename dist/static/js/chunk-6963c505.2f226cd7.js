(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6963c505"],{9615:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"fireworks-box",style:t.containerStyle},[t._t("button",(function(){return[t.isShowLaunchBtn?e("button",{ref:"fireworksButton",staticClass:"fireworks-button",style:t.buttonStyle,attrs:{title:t.buttonTooltip},on:{click:t.handleButtonClick,touchstart:t.handleTouchStart,touchend:t.handleTouchEnd}},[e("span",{staticClass:"button-emoji"},[t._v(t._s(t.buttonEmoji))]),t.showButtonText?e("span",{staticClass:"button-text"},[t._v(t._s(t.buttonText))]):t._e(),t.rippleActive?e("span",{staticClass:"ripple-effect",style:t.rippleStyle}):t._e(),t.glowActive?e("span",{staticClass:"glow-effect",style:t.glowStyle}):t._e()]):t._e()]}),{launchFireworks:t.launchFireworks,fireworksRunning:t.fireworksRunning}),e("div",{ref:"canvasContainer",staticClass:"canvas-container"}),t.showFeedback&&t.isShowTip?e("div",{staticClass:"feedback-message"},[t._v(t._s(t.feedbackText))]):t._e()],2)},s=[],r=(i("14d9"),i("e9f5"),i("7d54"),i("2929")),n={name:"FireworksButtonForMobile",props:{background:{type:[String,Object],default:()=>({color:"rgba(0, 0, 0, 0.97)",image:"",gradient:"",blur:!1,opacity:1})},buttonConfig:{type:Object,default:()=>({position:{top:"auto",right:"20px",bottom:"20px",left:"auto",fixed:!1},style:{size:"medium",width:null,height:null,color:"gradient",customColor:null,rounded:!0,shadow:!0,emoji:"✨",text:"",showText:!0,tooltip:"",border:!1,borderColor:"rgba(255, 255, 255, 0.2)",hoverEffect:!0,pulse:!1,clickEffect:"ripple",rippleColor:"rgba(255, 255, 255, 0.5)",clickScale:.92}})},fireworksConfig:{type:Object,default:()=>({opacity:.7,acceleration:1.05,friction:.95,gravity:1.2,particles:100,traceLength:3,traceSpeed:8,explosion:5,intensity:50,flickering:30,hue:{min:0,max:360},brightness:{min:60,max:90},lineStyle:"round",decay:{min:.015,max:.025},delay:{min:30,max:60},rocketsPoint:{min:50,max:50},lineWidth:{explosion:{min:1,max:3},trace:{min:.5,max:1}},mouse:{click:!0,move:!1,max:3},sound:!1,autoresize:!0,boundaries:{x:50,y:50,width:50,height:50},minHeight:0,maxHeight:0})},autoLaunch:{type:Boolean,default:!1},autoLaunchInterval:{type:Number,default:2333},launchCount:{type:Number,default:1},isShowLaunchBtn:{type:Boolean,default:!0},isShowTip:{type:Boolean,default:!1},preventZoom:{type:Boolean,default:!0}},data(){return{fireworks:null,fireworksRunning:!1,showFeedback:!1,feedbackText:"",feedbackTimer:null,autoLaunchTimer:null,zoomEventHandlers:[],rippleActive:!1,glowActive:!1,rippleStyle:{},glowStyle:{},clickTimeout:null,isTouching:!1,touchStartTime:0}},computed:{containerStyle(){const t={};if("string"===typeof this.background)t.background=this.background;else if("object"===typeof this.background){const e=this.background;e.gradient?t.background=e.gradient:e.image?(t.backgroundImage=`url(${e.image})`,t.backgroundSize="cover",t.backgroundPosition="center",t.backgroundRepeat="no-repeat"):e.color&&(t.backgroundColor=e.color),e.blur&&(t.backdropFilter="blur(10px)",t.webkitBackdropFilter="blur(10px)"),void 0!==e.opacity&&(t.opacity=e.opacity)}return t},buttonStyle(){const t=this.buttonConfig.position,e=this.buttonConfig.style,i={};if(t.fixed?(i.position="fixed",i.zIndex="9999"):i.position="absolute","auto"!==t.top&&(i.top=t.top),"auto"!==t.right&&(i.right=t.right),"auto"!==t.bottom&&(i.bottom=t.bottom),"auto"!==t.left&&(i.left=t.left),e.width&&e.height)i.width=e.width,i.height=e.height;else{const t={small:{width:"44px",height:"44px",fontSize:"20px"},medium:{width:"56px",height:"56px",fontSize:"24px"},large:{width:"68px",height:"68px",fontSize:"28px"},xlarge:{width:"80px",height:"80px",fontSize:"32px"}},o=t[e.size]||t.medium;Object.assign(i,o)}let o="",s="white";switch(e.color){case"primary":o="linear-gradient(135deg, #667eea 0%, #764ba2 100%)";break;case"secondary":o="linear-gradient(135deg, #f093fb 0%, #f5576c 100%)";break;case"custom":o=e.customColor||"linear-gradient(135deg, #ff3366, #ff6633)";break;case"transparent":o="rgba(255, 255, 255, 0.1)",s="#fff";break;case"gradient":default:o="linear-gradient(135deg, #667eea 0%, #764ba2 100%)";break}return i.background=o,i.color=s,e.rounded?i.borderRadius="50%":i.borderRadius="12px",e.border&&(i.border="2px solid "+(e.borderColor||"rgba(255, 255, 255, 0.2)")),e.shadow&&("transparent"===e.color?i.boxShadow="0 4px 15px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1)":i.boxShadow="0 8px 25px rgba(0, 0, 0, 0.3), 0 4px 10px rgba(0, 0, 0, 0.1)"),i.transition="all 0.25s cubic-bezier(0.34, 1.56, 0.64, 1)",i.WebkitTapHighlightColor="transparent",i.tapHighlightColor="transparent",i},buttonEmoji(){return this.buttonConfig.style.emoji||"✨"},buttonText(){return this.buttonConfig.style.text||""},showButtonText(){return!1!==this.buttonConfig.style.showText},buttonTooltip(){return this.buttonConfig.style.tooltip||""},clickEffectType(){return this.buttonConfig.style.clickEffect||"ripple"}},mounted(){this.initFireworks(),this.preventZoom&&this.disableZoom(),this.autoLaunch&&this.startAutoLaunch(),this.buttonConfig.style.pulse&&this.addPulseAnimation()},beforeDestroy(){this.fireworks&&this.fireworks.stop(),this.autoLaunchTimer&&clearInterval(this.autoLaunchTimer),this.feedbackTimer&&clearTimeout(this.feedbackTimer),this.clickTimeout&&clearTimeout(this.clickTimeout),this.removeZoomPrevention(),window.removeEventListener("resize",this.handleResize)},watch:{fireworksConfig:{deep:!0,handler(t){this.fireworks&&this.fireworks.updateOptions(t)}},autoLaunch(t){t?this.startAutoLaunch():this.stopAutoLaunch()},autoLaunchInterval(t){this.autoLaunch&&(this.stopAutoLaunch(),this.startAutoLaunch())}},methods:{initFireworks(){const t=this.$refs.canvasContainer;if(t)try{this.fireworks=new r["a"](t,this.fireworksConfig),window.addEventListener("resize",this.handleResize),console.log("✨ Fireworks.js 已初始化")}catch(e){console.error("烟花初始化失败:",e)}},handleResize(){this.fireworks&&this.fireworksConfig.autoresize&&this.fireworks.updateOptions({autoresize:!0})},handleButtonClick(t){this.triggerClickEffect(t),this.clickTimeout=setTimeout(()=>{this.launchFireworks()},300)},handleTouchStart(t){this.isTouching=!0,this.touchStartTime=Date.now();const e=this.$refs.fireworksButton;e&&e.classList.add("touch-active");const i=t.touches[0],o=t.currentTarget.getBoundingClientRect(),s=i.clientX-o.left,r=i.clientY-o.top;this.triggerClickEffect({offsetX:s,offsetY:r})},handleTouchEnd(t){this.isTouching=!1;const e=this.$refs.fireworksButton;e&&e.classList.remove("touch-active");const i=Date.now()-this.touchStartTime;i<300&&(this.clickTimeout=setTimeout(()=>{this.launchFireworks()},200))},triggerClickEffect(t){const e=this.clickEffectType,i=this.$refs.fireworksButton;if(!i)return;let o,s;if(void 0!==t.offsetX)o=t.offsetX,s=t.offsetY;else if(t.touches&&t.touches[0]){const e=t.touches[0],i=t.currentTarget.getBoundingClientRect();o=e.clientX-i.left,s=e.clientY-i.top}else{const t=i.getBoundingClientRect();o=t.width/2,s=t.height/2}switch(e){case"ripple":this.showRippleEffect(o,s);break;case"glow":this.showGlowEffect(o,s);break;case"bounce":this.showBounceEffect();break;case"combined":this.showRippleEffect(o,s),this.showGlowEffect(o,s),this.showBounceEffect();break;default:this.showRippleEffect(o,s)}this.showScaleEffect()},showRippleEffect(t,e){const i=this.$refs.fireworksButton;if(!i)return;const o=i.getBoundingClientRect(),s=Math.max(o.width,o.height);this.rippleStyle={width:s+"px",height:s+"px",left:t-s/2+"px",top:e-s/2+"px",backgroundColor:this.buttonConfig.style.rippleColor||"rgba(255, 255, 255, 0.5)"},this.rippleActive=!0,setTimeout(()=>{this.rippleActive=!1},600)},showGlowEffect(t,e){const i=this.$refs.fireworksButton;i&&(this.glowStyle={left:t+"px",top:e+"px"},this.glowActive=!0,setTimeout(()=>{this.glowActive=!1},800))},showBounceEffect(){const t=this.$refs.fireworksButton;t&&(t.classList.add("bounce-animation"),setTimeout(()=>{t.classList.remove("bounce-animation")},300))},showScaleEffect(){const t=this.$refs.fireworksButton;if(!t)return;const e=this.buttonConfig.style.clickScale||.92;t.classList.add("scale-animation"),t.style.setProperty("--click-scale",e),setTimeout(()=>{t.classList.remove("scale-animation"),t.style.removeProperty("--click-scale")},200)},launchFireworks(){this.fireworks&&(this.fireworks.launch(this.launchCount),this.showFeedbackMessage("烟花发射！"),this.$emit("fireworks-launched",{count:this.launchCount,timestamp:(new Date).toISOString(),config:this.fireworksConfig}))},startAutoLaunch(){this.autoLaunchTimer&&clearInterval(this.autoLaunchTimer),this.autoLaunchTimer=setInterval(()=>{this.launchFireworks()},this.autoLaunchInterval),this.showFeedbackMessage("自动发射已开启")},stopAutoLaunch(){this.autoLaunchTimer&&(clearInterval(this.autoLaunchTimer),this.autoLaunchTimer=null,this.showFeedbackMessage("自动发射已停止"))},showFeedbackMessage(t){this.feedbackText=t,this.showFeedback=!0,this.feedbackTimer&&clearTimeout(this.feedbackTimer),this.feedbackTimer=setTimeout(()=>{this.showFeedback=!1},2e3)},startFireworks(){this.fireworks&&(this.fireworks.start(),this.fireworksRunning=!0,this.$emit("fireworks-started"))},stopFireworks(){this.fireworks&&(this.fireworks.stop(),this.fireworksRunning=!1,this.$emit("fireworks-stopped"))},clearFireworks(){if(!this.fireworks)return;const t=this.fireworksRunning;this.fireworks.stop(),this.fireworksRunning=!1,setTimeout(()=>{t&&(this.fireworks.start(),this.fireworksRunning=!0)},100),this.$emit("fireworks-cleared")},updateFireworksConfig(t){if(!this.fireworks)return;const e={...this.fireworksConfig,...t};this.fireworks.updateOptions(e),this.$emit("fireworks-config-updated",e)},disableZoom(){const t=t=>{const e=Date.now();e-this.lastTouchEnd<=300&&t.preventDefault(),this.lastTouchEnd=e},e=t=>{t.touches.length>1&&t.preventDefault()},i=t=>{t.preventDefault(),t.stopPropagation()},o=t=>{!t.ctrlKey&&!t.metaKey||"+"!==t.key&&"-"!==t.key&&"="!==t.key&&"0"!==t.key&&187!==t.keyCode&&189!==t.keyCode&&48!==t.keyCode||t.preventDefault()},s=t=>{(t.ctrlKey||t.metaKey)&&t.preventDefault()};this.lastTouchEnd=0;const r=[{event:"touchend",handler:t,options:{passive:!1}},{event:"touchstart",handler:e,options:{passive:!1}},{event:"touchmove",handler:e,options:{passive:!1}},{event:"dblclick",handler:i,options:{passive:!1}},{event:"keydown",handler:o,options:!1},{event:"wheel",handler:s,options:{passive:!1}}];r.forEach(({event:t,handler:e,options:i})=>{document.addEventListener(t,e,i),this.zoomEventHandlers.push({event:t,handler:e})})},removeZoomPrevention(){this.zoomEventHandlers.forEach(({event:t,handler:e})=>{document.removeEventListener(t,e)}),this.zoomEventHandlers=[]},addPulseAnimation(){const t=document.querySelector(".fireworks-button");t&&t.classList.add("pulse-animation")},removePulseAnimation(){const t=document.querySelector(".fireworks-button");t&&t.classList.remove("pulse-animation")},setBackground(t){this.background="string"===typeof t?t:{...this.background,...t}}}},a=n,c=(i("cb9d"),i("2877")),h=Object(c["a"])(a,o,s,!1,null,"31bc62a9",null);e["default"]=h.exports},c927:function(t,e,i){},cb9d:function(t,e,i){"use strict";i("c927")}}]);