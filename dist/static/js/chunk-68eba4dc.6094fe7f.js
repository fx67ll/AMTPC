(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-68eba4dc"],{a9b4:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"cube-box"},[t("div",{staticClass:"three-box",attrs:{id:"cube-container"}}),e.isMobileDevice?e._e():t("div",{staticClass:"button-panel"},[t("el-input-number",{attrs:{disabled:e.isProgress||e.isNeedReset},model:{value:e.randomCount,callback:function(t){e.randomCount=t},expression:"randomCount"}}),t("el-button",{staticClass:"random-buttom",attrs:{icon:"el-icon-thumb",disabled:e.isNeedReset},on:{click:function(t){return e.randomCube()}}},[e._v("打乱魔方 ")]),e.isNeedReset?t("span",{staticClass:"random-span"},[e._v(e._s(e.recordTextTime))]):e._e(),t("el-button",{staticClass:"random-buttom",attrs:{icon:e.recordIcon},on:{click:function(t){return e.randomTimeRecord()}}},[e._v(e._s(e.recordText))]),e.isNeedReset?t("el-button",{staticClass:"random-buttom",attrs:{icon:"el-icon-timer"},on:{click:function(t){return e.randomTimeReset()}}},[e._v("重新计时 ")]):e._e()],1),t("fx67ll-footer")],1)},n=[],r=(i("14d9"),i("5a89")),a=i("ef20"),o=i("4721"),c=i("c46f"),l=i("c1df"),h=i.n(l),d={name:"cube",data(){return{width:null,height:null,camera:null,scene:null,renderer:null,stats:null,controller:null,cubeArr:[],cubeParmas:{x:0,y:0,z:0,num:3,len:50,colors:["rgba(255,193,37,1)","rgba(0,191,255,1)","rgba(50,205,50,1)","rgba(178,34,34,1)","rgba(255,255,0,1)","rgba(255,255,255,1)"],dir:{xLine:new r["zb"](1,0,0),xLineAd:new r["zb"](-1,0,0),yLine:new r["zb"](0,1,0),yLineAd:new r["zb"](0,-1,0),zLine:new r["zb"](0,0,1),zLineAd:new r["zb"](0,0,-1)}},cubeOriginArr:[],isRotating:!1,raycaster:null,intersect:null,startPoint:null,movePoint:null,normalize:null,mouse:null,randomTimer:null,isRandom:!1,isProgress:!1,rotateSpeed:100,randomCount:50,randomRecord:1,recordText:"开始计时",recordTextTime:"",recordIcon:"el-icon-video-play",isPause:!1,isNeedReset:!1,recordTimeStart:null,recordTimeLast:0,recordTimeTotal:0,recordTimer:null,isMobileDevice:!1}},mounted(){let e=this;if(/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)){window.requestAnimationFrame;let e=0;window.requestAnimationFrame=function(t){const i=Date.now(),s=Math.max(e+16.67,i);return setTimeout(()=>{e=s,t(s)},s-i)}}if(this.init(),this.showOperationTips(),window.innerWidth>=this.$store.state.adaptationInnerWidth)this.isMobileDevice=!1,this.addCubeEvent(),this.showCubeOperationTips();else{let t=500;this.isMobileDevice=!0,this.$message({message:"正在打乱魔方，请稍后还原哦 (๑•̀ㅂ•́)و✧",type:"success",offset:70,duration:6e3+t}),this.randomCount=30,setTimeout((function(){e.randomCube()}),t)}},methods:{showCubeOperationTips(){this.$notify({title:"魔方操作指南",position:"top-right",offset:190,dangerouslyUseHTMLString:!0,message:"\n\t\t\t\t\t<br/>\n\t\t\t\t\t<strong><i class='el-icon-coordinate'></i> 三维旋转需用鼠标左键按住空白区域</strong><br/><br/>\n\t\t\t\t\t<strong><i class='el-icon-thumb'></i> 点击滑动魔方表面可操作魔方转动</strong><br/><br/>\n\t\t\t\t\t<strong><i class='el-icon-refresh'></i> 刷新页面会导致魔方重置</strong><br/><br/>\n\t\t\t\t\t<strong><i class='el-icon-male'></i> 会偶现bug无法转动魔方，待后续解决</strong><br/><br/>\n\t\t\t\t\t<strong><i class='el-icon-message'></i> 联系邮箱 fx67ll@qq.com，欢迎提交bug</strong><br/><br/>\n\t\t\t\t",duration:3e4,showClose:!0})},randomCube(){let e=this;if(this.randomCount)if(this.isProgress)this.$message.error("正在打乱魔方，请勿重复操作 凸(艹皿艹 )");else{this.isProgress=!0,this.removeCubeEvent();const t=()=>{if(e.randomCount<=0)return clearTimeout(e.randomTimer),e.randomTimer=null,e.isProgress=!1,e.addCubeEvent(),void(window.innerWidth>=e.$store.state.adaptationInnerWidth?e.$message.success("打乱完成咯~ 请开始还原魔方吧 ～(￣▽￣～)"):e.$message({message:"打乱完成咯~ 请开始还原魔方吧 ～(￣▽￣～)",type:"success",offset:70}));e.randomRotate(),e.randomTimer=setTimeout(t,2*e.rotateSpeed),e.randomCount--};t()}else this.$message.error("亲~ 打乱次数不能为零哦 (づ￣3￣)づ╭❤～")},randomRotate(){let e=this,t=[.1,1.2,2.4,3.3,.2,1.1,2.3,3.4,.4,1.3,4.3,5.4,1.4,.3,4.4,5.3,2.2,3.1,4.1,5.2,2.1,3.2,4.2,5.1],i=c["a"].random(0,t.length-1),s=t[i],n=c["a"].random(0,e.cubeArr.length-1),r={object:e.cubeArr[n]},a=this.getBoxs(r,s);window.requestAnimationFrame((function(t){e.rotateAnimation(a,s,e.rotateSpeed,t,0)}))},randomTimeRecord(){let e=this;this.isProgress?this.$message.error("正在打乱魔方，不能计时 ┻━┻︵╰(‵□′)╯︵┻━┻"):(this.isPause?(this.recordTimeLast=this.recordTimeTotal,this.recordIcon="el-icon-video-play",this.recordText="继续计时",clearInterval(this.recordTimer),this.recordTimer=null):(this.recordTimeStart=h()().format("YYYY-MM-DD HH:mm:ss"),0===this.recordTimeLast?this.$message.success("计时开始咯~ 请开始还原魔方吧 (๑•̀ㅂ•́)و✧"):this.$message.success("继续计时咯~ 不能够放弃啊骚年！！！  Σ( ° △ °|||)︴"),this.recordIcon="el-icon-loading",this.recordText="暂停计时",this.isNeedReset=!0,this.recordTimer=setInterval((function(){if(e.isNeedReset){e.recordTimeTotal=e.recordTimeLast+h()().diff(h()(e.recordTimeStart),"seconds");let t="00秒";t=e.recordTimeTotal<60?h.a.utc(1e3*e.recordTimeTotal).format("ss秒"):e.recordTimeTotal<3600?h.a.utc(1e3*e.recordTimeTotal).format("mm分 ss秒"):h.a.utc(1e3*e.recordTimeTotal).format("HH小时 mm分 ss秒"),e.recordTextTime="当前已用时："+t,e.isClickPause=!1}}),1e3)),this.isPause=!this.isPause)},randomTimeReset(){this.recordIcon="el-icon-video-play",this.recordText="开始计时",this.isPause=!1,this.isNeedReset=!1,this.recordTimeTotal=0,this.recordTextTime="",this.recordTimeLast=0,clearInterval(this.recordTimer),this.recordTimer=null,this.$message.success("重置计时成功，下次再努力吧 (o゜▽゜)o☆[BINGO!]")},init(){this.width=window.innerWidth,this.height=window.innerHeight;const e=document.getElementById("cube-container");this.mouse=new r["yb"],this.raycaster=new r["hb"],this.renderer=new r["Cb"]({antialias:!0}),this.renderer.setSize(this.width,this.height),this.renderer.setClearColor(16777215,1),e.appendChild(this.renderer.domElement),this.camera=new r["ab"](45,this.width/this.height,1,1e3),window.innerWidth>=this.$store.state.adaptationInnerWidth?this.camera.position.set(400,400,400):this.camera.position.set(400,300,700),this.camera.up.set(0,1,0),this.camera.lookAt(new r["zb"](0,0,0)),this.scene=new r["jb"];const t=new r["b"](16711422);this.scene.add(t),this.initCube(),this.controller=new o["a"](this.camera,this.renderer.domElement),this.controller.target.set(0,0,0),this.controller.update(),window.addEventListener("resize",this.onWindowResize),this.stats=new a["a"],e.appendChild(this.stats.dom),this.animate()},addCubeEvent(){this.renderer.domElement.addEventListener("pointerdown",this.startCube,!1),this.renderer.domElement.addEventListener("mousemove",this.moveCube,!1),this.renderer.domElement.addEventListener("pointerup",this.stopCube,!1),this.renderer.domElement.addEventListener("touchstart",this.startCube,!1),this.renderer.domElement.addEventListener("touchmove",this.moveCube,!1),this.renderer.domElement.addEventListener("touchend",this.stopCube,!1)},removeCubeEvent(){this.renderer.domElement.removeEventListener("pointerdown",this.startCube),this.renderer.domElement.removeEventListener("mousemove",this.moveCube),this.renderer.domElement.removeEventListener("pointerup",this.stopCube),this.renderer.domElement.removeEventListener("touchstart",this.startCube),this.renderer.domElement.removeEventListener("touchmove",this.moveCube),this.renderer.domElement.removeEventListener("touchend",this.stopCube)},initAxis(){const e=new r["I"]({color:16711680}),t=new r["C"];t.vertices.push(new r["zb"](0,0,0),new r["zb"](300,0,0));const i=new r["H"](t,e);this.scene.add(i);const s=new r["I"]({color:65280}),n=new r["C"];n.vertices.push(new r["zb"](0,0,0),new r["zb"](0,300,0));const a=new r["H"](n,s);this.scene.add(a);const o=new r["I"]({color:255}),c=new r["C"];c.vertices.push(new r["zb"](0,0,0),new r["zb"](0,0,300));const l=new r["H"](c,o);this.scene.add(l)},initCube(){let e=this;const t=this.cubeParmas.x-this.cubeParmas.num/2*this.cubeParmas.len,i=this.cubeParmas.y+this.cubeParmas.num/2*this.cubeParmas.len,s=this.cubeParmas.z+this.cubeParmas.num/2*this.cubeParmas.len;let n=[];c["a"].each(e.cubeParmas.colors,(function(t,i){const s=new r["tb"](e.drawFace(t));s.needsUpdate=!0;const a=new r["R"]({map:s});n.push(a)}));for(let c=0;c<e.cubeParmas.num;c++)for(let a=0;a<e.cubeParmas.num*e.cubeParmas.num;a++){const o=new r["h"](e.cubeParmas.len,e.cubeParmas.len,e.cubeParmas.len),l=new r["P"](o,n);l.position.x=t+e.cubeParmas.len/2+a%e.cubeParmas.num*e.cubeParmas.len,l.position.y=i-e.cubeParmas.len/2-parseInt(a/e.cubeParmas.num)*e.cubeParmas.len,l.position.z=s-e.cubeParmas.len/2-c*e.cubeParmas.len,e.cubeArr.push(l)}c["a"].each(this.cubeArr,(function(t,i){e.cubeOriginArr.push({x:t.position.x,y:t.position.y,z:t.position.z,cubeIndex:t.id}),t.cubeIndex=t.id,e.scene.add(t)}));const a=new r["h"](150,150,150);let o=0;c["a"].each(a.faces,(function(e,t){e.color.setHex(o)}));const l=new r["Q"]({vertexColors:r["w"],opacity:0,transparent:!0}),h=new r["P"](a,l);h.cubeType="coverCube",e.scene.add(h)},drawFace(e){let t=document.createElement("canvas");t.width=256,t.height=256;let i=t.getContext("2d");return i.fillStyle="rgba(0, 0, 0, 1)",i.fillRect(0,0,256,256),i.rect(16,16,224,224),i.lineJoin="round",i.lineWidth=16,i.fillStyle=e,i.strokeStyle=e,i.stroke(),i.fill(),t},onWindowResize(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)},animate(){this.renderer.clear(),this.renderer.render(this.scene,this.camera),window.requestAnimationFrame(this.animate),this.stats.update()},moveCube(e){let t=this;if(this.getIntersects(e),this.intersect&&!this.isRotating&&this.startPoint&&(this.movePoint=this.intersect.point,!this.movePoint.equals(this.startPoint))){this.isRotating=!0;let e=this.movePoint.sub(this.startPoint),i=this.getDirection(e),s=this.getBoxs(this.intersect,i);window.requestAnimationFrame((function(e){t.rotateAnimation(s,i,500,e,0)}))}e.preventDefault()},startCube(e){this.getIntersects(e),!this.isRotating&&this.intersect?(this.startPoint=this.intersect.point,this.controller.enabled=!1):this.controller.enabled=!0},stopCube(){this.intersect=null,this.startPoint=null},getIntersects(e){let t=this;if(e.touches){let e=event.touches[0];this.mouse.x=e.clientX/this.width*2-1,this.mouse.y=-e.clientY/this.height*2+1}else this.mouse.x=e.clientX/this.width*2-1,this.mouse.y=-e.clientY/this.height*2+1;this.raycaster.setFromCamera(this.mouse,this.camera);let i=this.raycaster.intersectObjects(this.scene.children);if(i.length)if("coverCube"===i[0].object.cubeType)this.intersect=i[1],this.normalize=i[0].face.normal;else{this.intersect=i[0];try{t.normalize=i[1].face.normal}catch(e){console.log(e),console.error("非常抱歉！这是暂未解决的bug，请刷新页面后重新操作！")}}},getDirection(e){let t=e.angleTo(this.cubeParmas.dir.xLine),i=e.angleTo(this.cubeParmas.dir.xLineAd),s=e.angleTo(this.cubeParmas.dir.yLine),n=e.angleTo(this.cubeParmas.dir.yLineAd),r=e.angleTo(this.cubeParmas.dir.zLine),a=e.angleTo(this.cubeParmas.dir.zLineAd),o=c["a"].min([t,i,s,n,r,a]),l=null;return o===t&&(l=0,this.normalize.equals(this.cubeParmas.dir.yLine)?l+=.1:this.normalize.equals(this.cubeParmas.dir.yLineAd)?l+=.2:this.normalize.equals(this.cubeParmas.dir.zLine)?l+=.3:l+=.4),o===i&&(l=1,this.normalize.equals(this.cubeParmas.dir.yLine)?l+=.1:this.normalize.equals(this.cubeParmas.dir.yLineAd)?l+=.2:this.normalize.equals(this.cubeParmas.dir.zLine)?l+=.3:l+=.4),o===s&&(l=2,this.normalize.equals(this.cubeParmas.dir.zLine)?l+=.1:this.normalize.equals(this.cubeParmas.dir.zLineAd)?l+=.2:this.normalize.equals(this.cubeParmas.dir.xLine)?l+=.3:l+=.4),o===n&&(l=3,this.normalize.equals(this.cubeParmas.dir.zLine)?l+=.1:this.normalize.equals(this.cubeParmas.dir.zLineAd)?l+=.2:this.normalize.equals(this.cubeParmas.dir.xLine)?l+=.3:l+=.4),o===r&&(l=4,this.normalize.equals(this.cubeParmas.dir.yLine)?l+=.1:this.normalize.equals(this.cubeParmas.dir.yLineAd)?l+=.2:this.normalize.equals(this.cubeParmas.dir.xLine)?l+=.3:l+=.4),o===a&&(l=5,this.normalize.equals(this.cubeParmas.dir.yLine)?l+=.1:this.normalize.equals(this.cubeParmas.dir.yLineAd)?l+=.2:this.normalize.equals(this.cubeParmas.dir.xLine)?l+=.3:l+=.4),l},getBoxs(e,t){let i=this,s=e.object.cubeIndex,n=[];c["a"].each(this.cubeArr,(function(e,t){n.push(e.cubeIndex)}));let r=c["a"].min(n);s-=r;let a=parseInt(s/9),o=s%9,l=[];switch(t){case.1:case.2:case 1.1:case 1.2:case 2.3:case 2.4:case 3.3:case 3.4:c["a"].each(i.cubeArr,(function(e,t){a===parseInt((e.cubeIndex-r)/9)&&l.push(e)}));break;case.3:case.4:case 1.3:case 1.4:case 4.3:case 4.4:case 5.3:case 5.4:c["a"].each(i.cubeArr,(function(e,t){parseInt(o/3)===parseInt((e.cubeIndex-r)%9/3)&&l.push(e)}));break;case 2.1:case 2.2:case 3.1:case 3.2:case 4.1:case 4.2:case 5.1:case 5.2:c["a"].each(i.cubeArr,(function(e,t){o%3===(e.cubeIndex-r)%9%3&&l.push(e)}));break;default:break}return l},rotateAnimation(e,t,i,s,n,r){let a=this;0===n?(n=Math.floor(s/1e3),n,s=n):s=Math.floor(s/1e3);const o=Math.min(s-n,i);if(o>=i)return this.isRotating=!1,this.startPoint=null,void this.updateCubeIndex(e);const l=o/i;switch(t){case.1:case 1.2:case 2.4:case 3.3:c["a"].each(e,(function(e,t){a.rotateAroundWorld("z",e,-90*Math.PI/180*l)}));break;case.2:case 1.1:case 2.3:case 3.4:c["a"].each(e,(function(e,t){a.rotateAroundWorld("z",e,90*Math.PI/180*l)}));break;case.4:case 1.3:case 4.3:case 5.4:c["a"].each(e,(function(e,t){a.rotateAroundWorld("y",e,-90*Math.PI/180*l)}));break;case 1.4:case.3:case 4.4:case 5.3:c["a"].each(e,(function(e,t){a.rotateAroundWorld("y",e,90*Math.PI/180*l)}));break;case 2.2:case 3.1:case 4.1:case 5.2:c["a"].each(e,(function(e,t){a.rotateAroundWorld("x",e,90*Math.PI/180*l)}));break;case 2.1:case 3.2:case 4.2:case 5.1:c["a"].each(e,(function(e,t){a.rotateAroundWorld("x",e,-90*Math.PI/180*l)}));break;default:break}window.requestAnimationFrame((function(r){a.rotateAnimation(e,t,i,r,n,s)}))},updateCubeIndex(e){let t=this;const i=t.cubeParmas.len,s=i/2+1;c["a"].each(e,(function(e,i){c["a"].each(t.cubeOriginArr,(function(t,i){Math.abs(e.position.x-t.x)<=s&&Math.abs(e.position.y-t.y)<=s&&Math.abs(e.position.z-t.z)<=s&&(e.cubeIndex=t.cubeIndex)})),e.updateMatrix(),e.updateMatrixWorld()})),t.scene.updateMatrixWorld()},rotateAroundWorld(e,t,i){let s=t.position.x,n=t.position.y,a=t.position.z;const o=new r["fb"];"x"===e&&(o.setFromAxisAngle(this.cubeParmas.dir.xLine,i),t.quaternion.premultiply(o),t.position.y=Math.cos(i)*n-Math.sin(i)*a,t.position.z=Math.cos(i)*a+Math.sin(i)*n),"y"===e&&(o.setFromAxisAngle(this.cubeParmas.dir.yLine,i),t.quaternion.premultiply(o),t.position.x=Math.cos(i)*s+Math.sin(i)*a,t.position.z=Math.cos(i)*a-Math.sin(i)*s),"z"===e&&(o.setFromAxisAngle(this.cubeParmas.dir.zLine,i),t.quaternion.premultiply(o),t.position.x=Math.cos(i)*s-Math.sin(i)*n,t.position.y=Math.cos(i)*n+Math.sin(i)*s),t.updateMatrix(),t.updateMatrixWorld()}}},u=d,m=(i("c4ea"),i("2877")),b=Object(m["a"])(u,s,n,!1,null,"1f9e2f93",null);t["default"]=b.exports},c4ea:function(e,t,i){"use strict";i("c865")},c865:function(e,t,i){},ef20:function(e,t,i){"use strict";var s=function(){var e=0,t=document.createElement("div");function i(e){return t.appendChild(e.dom),e}function n(i){for(var s=0;s<t.children.length;s++)t.children[s].style.display=s===i?"block":"none";e=i}t.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",t.addEventListener("click",(function(i){i.preventDefault(),n(++e%t.children.length)}),!1);var r=(performance||Date).now(),a=r,o=0,c=i(new s.Panel("FPS","#0ff","#002")),l=i(new s.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var h=i(new s.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:t,addPanel:i,showPanel:n,begin:function(){r=(performance||Date).now()},end:function(){o++;var e=(performance||Date).now();if(l.update(e-r,200),e>=a+1e3&&(c.update(1e3*o/(e-a),100),a=e,o=0,h)){var t=performance.memory;h.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){r=this.end()},domElement:t,setMode:n}};s.Panel=function(e,t,i){var s=1/0,n=0,r=Math.round,a=r(window.devicePixelRatio||1),o=80*a,c=48*a,l=3*a,h=2*a,d=3*a,u=15*a,m=74*a,b=30*a,p=document.createElement("canvas");p.width=o,p.height=c,p.style.cssText="width:80px;height:48px";var f=p.getContext("2d");return f.font="bold "+9*a+"px Helvetica,Arial,sans-serif",f.textBaseline="top",f.fillStyle=i,f.fillRect(0,0,o,c),f.fillStyle=t,f.fillText(e,l,h),f.fillRect(d,u,m,b),f.fillStyle=i,f.globalAlpha=.9,f.fillRect(d,u,m,b),{dom:p,update:function(c,w){s=Math.min(s,c),n=Math.max(n,c),f.fillStyle=i,f.globalAlpha=1,f.fillRect(0,0,o,u),f.fillStyle=t,f.fillText(r(c)+" "+e+" ("+r(s)+"-"+r(n)+")",l,h),f.drawImage(p,d+a,u,m-a,b,d,u,m-a,b),f.fillRect(d+m-a,u,a,b),f.fillStyle=i,f.globalAlpha=.9,f.fillRect(d+m-a,u,a,r((1-c/w)*b))}}},t["a"]=s}}]);